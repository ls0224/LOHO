var GLOBAL=GLOBAL||{};function Appoint(a){var b={title:"在线预约到店体验",popHtml:""};this.options=$.extend({},b,a)}Appoint.prototype.pop=function(){this.s_dialog=$.dialog(this.options.title,this.options.popHtml)};Appoint.prototype.close=function(){this.s_dialog.close()};Appoint.prototype.get=function(){};Appoint.prototype.getPopHtml=function(a,c,d){var b=this;$.get(a,c).done(function(e){b.options.popHtml=e;d();return e})};Appoint.prototype.afterAppoint=function(a){ga("require","ecommerce","ecommerce.js");ga("ecommerce:addTransaction",{id:a.code,affiliation:" ",revenue:"100",shipping:"",tax:""});ga("ecommerce:send")};$(".mix_appoint").on("click",function(){var c=new Appoint();GLOBAL.curAp=c;var d=$(this),b=GLOBAL.apParams={},a=d.attr("data-tips")||"请选择想要去的<em>城市</em>和<em>门店！</em>",e=d.attr("data-limit-dates");c.options.title=d.attr("data-title")||"在线预约到店体验";GLOBAL.apParams.type=d.attr("data-act");GLOBAL.apParams.params=d.attr("data-prams");GLOBAL.apParams.sms=d.attr("data-sms");GLOBAL.apParams.success_tips=d.attr("data-success_tips");GLOBAL.apParams.error_tips=d.attr("data-success_tips");GLOBAL.apParams.about=d.attr("data-about");GLOBAL.apParams.activ_type||(GLOBAL.apParams.activ_type="active");GLOBAL.apParams.activ_param||(GLOBAL.apParams.activ_param="活动");GLOBAL.apParams.sms||(GLOBAL.apParams.sms="短信模板");GLOBAL.apParams.success_tips||(GLOBAL.apParams.success_tips="提交成功");GLOBAL.apParams.error_tips||(GLOBAL.apParams.error_tips="提交失败");c.getPopHtml("/appoint_box.php?act=get_tpl",{tips:a,dates:e},function(){c.pop()})});$(".appoint").on("click",function(){var c=new Appoint();GLOBAL.curAp=c;var d=$(this),b=GLOBAL.apParams={},a=d.attr("data-tips")||"请选择想要去的<em>城市</em>和<em>门店！</em>";c.options.title=d.attr("data-title")||"在线预约到店体验";GLOBAL.apParams.act=d.attr("data-act");GLOBAL.apParams.type=d.attr("data-act");GLOBAL.apParams.params=d.attr("data-prams");GLOBAL.apParams.sms=d.attr("data-sms");GLOBAL.apParams.success_tips=d.attr("data-success_tips");GLOBAL.apParams.error_tips=d.attr("data-success_tips");GLOBAL.apParams.about=d.attr("data-about");GLOBAL.apParams.activ_type||(GLOBAL.apParams.activ_type="active");GLOBAL.apParams.activ_param||(GLOBAL.apParams.activ_param="活动");GLOBAL.apParams.sms||(GLOBAL.apParams.sms="短信模板");GLOBAL.apParams.success_tips||(GLOBAL.apParams.success_tips="提交成功");GLOBAL.apParams.error_tips||(GLOBAL.apParams.error_tips="提交失败");c.getPopHtml("/appoint_box.php?act=get_tpl",{tips:a},function(){c.pop()})});function goodsAppoint(a){Appoint.call(this,a)}goodsAppoint.prototype=new Appoint();goodsAppoint.prototype.getPopHtml=function(){var a=this;$.get("/goods_reservation.php?act=reservation_template").done(function(b){a.options.popHtml=b;a.pop();return b})};