(function(a){a.fn.drag=function(b){var c={handle:false,start:null,drag:null,stop:null};var b=a.extend(c,b);return this.each(function(){var d=a(this),f;if(!b.handle){f=d}else{f=b.handle}var e=function(k){var j=k.clientX-startX,i=k.clientY-startY,l=offTop+i,h=offLeft+j,g=a(window).scrollTop();if(h<0){h=0}if(h+boxWidth>winWidth){h=winWidth-boxWidth}if(d.css("position")!="absolute"){l-=g;if(l+boxHeight>winHeight){l=winHeight-boxHeight}}else{if(l+boxHeight>g+winHeight){l=g+winHeight-boxHeight}if(l<g){l=g}}if(l<0){l=0}d.css({left:h,top:l});if(typeof(b.drag)=="function"){b.drag()}};f.mousedown(function(n){document.onselectstart=function(){return false};var m=n.clientX,k=n.clientY,h=d.offset().left,j=d.offset().top,l=d.outerWidth(true),o=d.outerHeight(true),g=a(window).width(),i=a(window).height();if(typeof(b.start)=="function"){b.start()}a(document).mousemove(e);return false}).mouseup(function(){if(typeof(b.stop)=="function"){b.stop()}});a(document).mouseup(function(){document.onselectstart=function(){return true};a(this).unbind("mousemove",e)})})}})(jQuery);